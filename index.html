<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>禁忌の記憶 - ノベルゲーム</title>
  <style>
    body {
      background: #000;
      color: #fff;
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    #novel-container {
      width: 80%;
      max-width: 800px;
      background: rgba(0, 0, 0, 0.7);
      padding: 20px;
      border-radius: 10px;
    }
    #dialogue {
      font-size: 20px;
      margin-bottom: 20px;
      min-height: 100px;
    }
    #choices {
      margin-top: 20px;
    }
    .choice-button {
      padding: 10px 20px;
      font-size: 18px;
      margin-right: 10px;
      margin-bottom: 10px;
      background: #444;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .choice-button:hover {
      background: #666;
    }
    #next-button {
      padding: 10px 20px;
      font-size: 18px;
      background: #444;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #next-button:hover {
      background: #666;
    }
  </style>
</head>
<body>
  <div id="novel-container">
    <div id="dialogue">物語がここから始まります...</div>
    <div id="choices"></div>
    <button id="next-button" onclick="nextDialogue()">次へ</button>
  </div>

  <script>
    const story = [
      { dialogue: "あなたは謎に包まれた古びた館の前に立っている。どちらから入る？", choices: [{ text: "正面玄関", next: 1 }, { text: "側面の扉", next: 2 }]},
      { dialogue: "広いロビーが広がる。どちらに進む？", choices: [{ text: "左の回廊", next: 3 }, { text: "右の回廊", next: 4 }]},
      { dialogue: "罠に掛かりゲームオーバー。", choices: null },
      { dialogue: "不気味な気配が漂う。進む？", choices: [{ text: "奥へ進む", next: 5 }, { text: "立ち止まる", next: 6 }]},
      { dialogue: "幻覚に襲われゲームオーバー。", choices: null },
      { dialogue: "書斎に鍵がある。どうする？", choices: [{ text: "鍵を取る", next: 7 }, { text: "無視する", next: 8 }]},
      { dialogue: "襲われてゲームオーバー。", choices: null },
      { dialogue: "重い扉に到着。どうする？", choices: [{ text: "鍵を使う", next: 9 }, { text: "叩いてみる", next: 10 }]},
      { dialogue: "罠でゲームオーバー。", choices: null },
      { dialogue: "螺旋階段が現れる。進路は？", choices: [{ text: "上る", next: 11 }, { text: "下る", next: 12 }]},
      { dialogue: "毒ガスが放たれゲームオーバー。", choices: null },
      { dialogue: "謎の装置を発見。どうする？", choices: [{ text: "調べる", next: 13 }, { text: "部屋を出る", next: 14 }]},
      { dialogue: "深淵に飲み込まれゲームオーバー。", choices: null },
      { dialogue: "謎を解きゲームクリア！おめでとう！", choices: null },
      { dialogue: "追い詰められゲームオーバー。", choices: null }
    ];

    let currentIndex = 0;

    function nextDialogue() {
      updateDialogue();
    }

    function updateDialogue() {
      const dialogue = story[currentIndex];
      document.getElementById('dialogue').innerText = dialogue.dialogue;

      if (dialogue.choices) {
        document.getElementById('next-button').style.display = 'none';
        showChoices(dialogue.choices);
      } else {
        document.getElementById('choices').innerHTML = '';
        document.getElementById('next-button').innerText = dialogue.dialogue.includes("ゲームオーバー") ? 'Restart' : '次へ';
        document.getElementById('next-button').onclick = dialogue.dialogue.includes("ゲームオーバー") ? restartGame : () => { currentIndex++; updateDialogue(); };
        document.getElementById('next-button').style.display = 'inline-block';
      }
    }

    function showChoices(choices) {
      const choicesDiv = document.getElementById('choices');
      choicesDiv.innerHTML = '';
      choices.sort(() => Math.random() - 0.5).forEach(choice => {
        const btn = document.createElement('button');
        btn.className = 'choice-button';
        btn.innerText = choice.text;
        btn.onclick = () => {
          currentIndex = choice.next;
          updateDialogue();
        };
        choicesDiv.appendChild(btn);
      });
    }

    function restartGame() {
      currentIndex = 0;
      document.getElementById('next-button').innerText = '次へ';
      document.getElementById('next-button').onclick = nextDialogue;
      updateDialogue();
    }

    updateDialogue();
  </script>
</body>
</html>