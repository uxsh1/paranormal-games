<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>禁忌の記憶 - ノベルゲーム</title>
  <style>
    body {
      background: #000;
      color: #fff;
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background-size: cover;
      background-position: center;
      height: 100vh;
    }
    #novel-container {
      width: 80%;
      max-width: 800px;
      background: rgba(0, 0, 0, 0.7);
      padding: 20px;
      border-radius: 10px;
    }
    #dialogue {
      font-size: 20px;
      margin-bottom: 20px;
      min-height: 100px;
    }
    #choices {
      margin-top: 20px;
    }
    .choice-button {
      padding: 10px 20px;
      font-size: 18px;
      margin-right: 10px;
      margin-bottom: 10px;
      background: #444;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .choice-button:hover {
      background: #666;
    }
    #next-button {
      padding: 10px 20px;
      font-size: 18px;
      background: #444;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #next-button:hover {
      background: #666;
    }
  </style>
</head>
<body>
  <div id="novel-container">
    <div id="dialogue">物語がここから始まります...</div>
    <div id="choices"></div>
    <button id="next-button" onclick="nextDialogue()">次へ</button>
  </div>

  <script>
    // ノベルゲームのストーリー配列
    const story = [
      {
        dialogue: "あなたは謎に包まれた古びた館の前に立っている。大きな正面玄関とひっそりとした側面の扉がある。どちらから入る？",
        choices: [
          { text: "正面玄関から入る", next: 1 },
          { text: "側面の扉から入る", next: 2 }
        ]
      },
      {
        dialogue: "正面玄関から入ると、厳かな雰囲気の中、広いロビーが広がる。左と右、どちらの回廊に進む？",
        choices: [
          { text: "左の回廊に進む", next: 3 },
          { text: "右の回廊に進む", next: 4 }
        ]
      },
      {
        dialogue: "側面の扉から入った途端、罠が作動し、あなたは命を落とした。ゲームオーバー.",
        choices: null
      },
      {
        dialogue: "左の回廊を進むと、薄暗い音とともに不気味な気配が漂う。前に進むか、立ち止まるか？",
        choices: [
          { text: "奥へ進む", next: 5 },
          { text: "一旦立ち止まる", next: 6 }
        ]
      },
      {
        dialogue: "右の回廊は呪われた霧に包まれ、足を踏み入れた瞬間、幻覚に襲われ命を奪われた。ゲームオーバー.",
        choices: null
      },
      {
        dialogue: "奥へ進むと、埃をかぶった書斎に辿り着く。机の上には古びた鍵が置かれている。どうする？",
        choices: [
          { text: "鍵を取る", next: 7 },
          { text: "無視して先へ進む", next: 8 }
        ]
      },
      {
        dialogue: "一旦立ち止まったその瞬間、後ろから不気味な足音が近づき、あなたは襲われた。ゲームオーバー.",
        choices: null
      },
      {
        dialogue: "鍵を手にしたあなたは、重い扉の前に到着する。扉には複雑な錠が掛かっている。どうする？",
        choices: [
          { text: "鍵を使って扉を開ける", next: 9 },
          { text: "扉を叩いてみる", next: 10 }
        ]
      },
      {
        dialogue: "無視して先へ進んだ結果、足元の罠にかかり、命を落とした。ゲームオーバー.",
        choices: null
      },
      {
        dialogue: "扉は固く閉ざされていたが、鍵が合い、ゆっくりと開かれる。先には螺旋階段が現れる。どちらに進む？",
        choices: [
          { text: "螺旋階段を上る", next: 11 },
          { text: "螺旋階段を下る", next: 12 }
        ]
      },
      {
        dialogue: "扉を叩いた瞬間、仕掛けが作動し、激しい毒ガスが放たれた。ゲームオーバー.",
        choices: null
      },
      {
        dialogue: "螺旋階段を上り、最上階の部屋に入る。そこには真実の証拠が隠されているかのような、謎めいた装置がある。どうする？",
        choices: [
          { text: "装置を調べる", next: 13 },
          { text: "そのまま部屋を出る", next: 14 }
        ]\n      },\n      {\n        dialogue: \"螺旋階段を下りた先は闇に包まれ、あなたは深淵に飲み込まれた。ゲームオーバー.\",\n        choices: null\n      },\n      {\n        dialogue: \"装置の謎を解いた瞬間、隠されていた秘密が明らかになり、あなたは真実を掴んだ。おめでとう！ゲームクリア.\",\n        choices: null\n      },\n      {\n        dialogue: \"部屋を出た途端、背後から追い詰められ、あなたは逃げ切れなかった。ゲームオーバー.\",\n        choices: null\n      }\n    ];\n\n    let currentIndex = 0;\n\n    function nextDialogue() {\n      // 現在のシーンに選択肢がある場合、次ボタンを隠して選択肢を表示\n      if (story[currentIndex].choices) {\n        document.getElementById('next-button').style.display = 'none';\n        showChoices(story[currentIndex].choices);\n        return;\n      }\n      // ゲームオーバーの場合は「Restart」ボタンを表示\n      if (story[currentIndex].dialogue.indexOf(\"ゲームオーバー\") !== -1) {\n        document.getElementById('next-button').innerText = 'Restart';\n        document.getElementById('next-button').onclick = restartGame;\n        return;\n      }\n      currentIndex++;\n      if (currentIndex >= story.length) {\n        document.getElementById('dialogue').innerText = \"エンディング。ありがとうございました。\";\n        document.getElementById('next-button').style.display = 'none';\n        document.getElementById('choices').innerHTML = \"\";\n        return;\n      }\n      updateDialogue();\n    }\n\n    function updateDialogue() {\n      document.getElementById('dialogue').innerText = story[currentIndex].dialogue;\n      document.getElementById('choices').innerHTML = \"\";\n      if (story[currentIndex].dialogue.indexOf(\"ゲームオーバー\") !== -1) {\n        document.getElementById('next-button').innerText = 'Restart';\n        document.getElementById('next-button').onclick = restartGame;\n        document.getElementById('next-button').style.display = 'inline-block';\n      } else if (story[currentIndex].choices) {\n        document.getElementById('next-button').style.display = 'none';\n        showChoices(story[currentIndex].choices);\n      } else {\n        document.getElementById('next-button').innerText = '次へ';\n        document.getElementById('next-button').onclick = nextDialogue;\n        document.getElementById('next-button').style.display = 'inline-block';\n      }\n    }\n\n    function restartGame() {\n      currentIndex = 0;\n      document.getElementById('next-button').innerText = '次へ';\n      document.getElementById('next-button').onclick = nextDialogue;\n      updateDialogue();\n    }\n\n    function showChoices(choices) {\n      const choicesDiv = document.getElementById('choices');\n      choicesDiv.innerHTML = \"\";\n      // ランダムに選択肢の順番をシャッフルする\n      let shuffled = choices.slice().sort(() => Math.random() - 0.5);\n      shuffled.forEach(choice => {\n        const btn = document.createElement('button');\n        btn.className = 'choice-button';\n        btn.innerText = choice.text;\n        btn.onclick = function() {\n          currentIndex = choice.next;\n          updateDialogue();\n        };\n        choicesDiv.appendChild(btn);\n      });\n    }\n  </script>\n</body>\n</html>\n```\n\n【手順】\n1. VSCodeでこの内容を index.html に保存します。\n2. ターミナルで\n```bash\n   git add . && git commit -m \"ゲームオーバー時にリスタートと、選択肢をランダム化するよう修正\"\n   git push origin main\n```\nを実行してください。\n\nこの更新により、ゲームオーバーになった場合は Restart ボタンが表示され、クリックすると最初に戻るようになり、また、各選択肢がランダムに表示されます。どのように動作するか確認してみてください。"